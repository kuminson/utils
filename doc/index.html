<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Class | @kuminson/utils</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="私人常用方法库">
    <link rel="preload" href="/utils/assets/css/0.styles.34e8756f.css" as="style"><link rel="preload" href="/utils/assets/js/app.01d95d2e.js" as="script"><link rel="preload" href="/utils/assets/js/2.65d0540a.js" as="script"><link rel="preload" href="/utils/assets/js/7.d215e9a0.js" as="script"><link rel="prefetch" href="/utils/assets/js/3.d0a9eaf2.js"><link rel="prefetch" href="/utils/assets/js/4.2a71f1a5.js"><link rel="prefetch" href="/utils/assets/js/5.f5fa4ae2.js"><link rel="prefetch" href="/utils/assets/js/6.cedaf407.js"><link rel="prefetch" href="/utils/assets/js/8.7cefb782.js"><link rel="prefetch" href="/utils/assets/js/9.cbfbc183.js">
    <link rel="stylesheet" href="/utils/assets/css/0.styles.34e8756f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/utils/" class="home-link router-link-active"><!----> <span class="site-name">@kuminson/utils</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/utils/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/utils/guide/" class="nav-link">
  guide
</a></div><div class="nav-item"><a href="/utils/doc/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  doc
</a></div><div class="nav-item"><a href="/utils/changelog/" class="nav-link">
  changeLog
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/utils/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/utils/guide/" class="nav-link">
  guide
</a></div><div class="nav-item"><a href="/utils/doc/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  doc
</a></div><div class="nav-item"><a href="/utils/changelog/" class="nav-link">
  changeLog
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/utils/doc/" aria-current="page" class="active sidebar-link">Class</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/utils/doc/#firecounter-将要废弃" class="sidebar-link">FireCounter (将要废弃)</a></li><li class="sidebar-sub-header"><a href="/utils/doc/#noscrollpuncture" class="sidebar-link">NoScrollPuncture</a></li><li class="sidebar-sub-header"><a href="/utils/doc/#inputfilter" class="sidebar-link">InputFilter</a></li><li class="sidebar-sub-header"><a href="/utils/doc/#autofillform" class="sidebar-link">AutoFillForm</a></li></ul></li><li><a href="/utils/doc/function.html" class="sidebar-link">function</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="class"><a href="#class" class="header-anchor">#</a> Class</h1> <h2 id="firecounter-将要废弃"><a href="#firecounter-将要废弃" class="header-anchor">#</a> FireCounter (将要废弃)</h2> <ul><li>描述</li></ul> <p>异步触发器</p> <ul><li>实例化：</li></ul> <p><code>new utils.FireCounter(num, fun, id)</code></p> <ul><li><p>实例化参数：</p> <ul><li><code>{number} num</code> - 触发次数</li> <li><code>{function} fun</code> - 触发后执行的方法</li> <li><code>{string|number} [id]</code> - 如果实例时传入id，触发时必须传入相同id才能触发</li></ul></li> <li><p>实例方法：</p> <ul><li><code>fire(id)</code> - 触发一次触发器
<ul><li><code>{string|number} [id]</code> - 如果实例化时传入id，触发时必须传入相同id才能触发</li></ul></li> <li><code>reset()</code> - 重置触发器次数</li> <li><code>newNum(num)</code> - 设置新的触发器次数，同时会重置触发器
<ul><li><code>{number} num</code> - 重新设置触发的次数</li></ul></li></ul></li> <li><p>用法：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">doSomeThing</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">utils<span class="token punctuation">.</span>FireCounter</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> doSomeThing<span class="token punctuation">)</span>

counter<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    counter<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    counter<span class="token punctuation">.</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre></div><p>上面方法会在3秒后第三次调用<code>counter.fire()</code>后，会触发<code>doSomeThing</code>方法。</p> <ul><li><p>备注:</p> <p>该方法可以用Promise.all()来实现，已经没有使用的必要，将会在后几个版本移除</p></li></ul> <h2 id="noscrollpuncture"><a href="#noscrollpuncture" class="header-anchor">#</a> NoScrollPuncture</h2> <ul><li>描述</li></ul> <p>禁止滚动穿刺</p> <ul><li>实例化：</li></ul> <p><code>new utils.NoScrollPuncture(selector)</code></p> <ul><li><p>实例化参数：</p> <ul><li><code>{stirng} selector</code> - 目标标签css选择器</li></ul></li> <li><p>实例方法：</p> <ul><li><code>removeEvent()</code> - 解除邦定的事件</li></ul></li> <li><p>用法：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">utils<span class="token punctuation">.</span>NoScrollPuncture</span><span class="token punctuation">(</span><span class="token string">'.test'</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ns<span class="token punctuation">.</span><span class="token function">removeEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="inputfilter"><a href="#inputfilter" class="header-anchor">#</a> InputFilter</h2> <ul><li>描述：</li></ul> <p>输入框过滤器</p> <ul><li>实例化：</li></ul> <p><code>new utils.InputFilter(formSelector, config)</code></p> <ul><li><p>实例化参数：</p> <ul><li><p><code>{stirng} formSelector</code> - 表单容器标签css选择器</p></li> <li><p><code>{object} config</code> - 过滤方法配置</p></li></ul></li> <li><p>实例方法：</p> <ul><li><p><code>add()</code> - 绑定过滤事件</p></li> <li><p><code>remove()</code> - 解除绑定的事件</p></li></ul></li> <li><p>静态方法：</p> <ul><li><p><code>InputFilter.filter.onlyNumber(n)</code> - 生成只有数字过滤器方法</p> <p>{number} n - 保留几位小数 -1为无限个小数 0为没有小数</p></li> <li><p><code>InputFilter.filter.noZeroBefore()</code> - 生成 数字前没有0 的过滤器方法</p></li> <li><p><code>InputFilter.filter.max(n)</code> - 生成 数字必须小于n 的过滤器方法</p> <p>{number} n - 数字最大值</p></li> <li><p><code>InputFilter.filter.min(n)</code> - 生成 数字必须大于n 的过滤器方法</p> <p>{number} n - 数字最小值</p></li></ul></li> <li><p>用法：</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 配置过滤方法</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token punctuation">[</span>
    utils<span class="token punctuation">.</span>InputFilter<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">onlyNumber</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    utils<span class="token punctuation">.</span>InputFilter<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">noZeroBefore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 实例化过滤器</span>
<span class="token keyword">const</span> inputFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">utils<span class="token punctuation">.</span>InputFilter</span><span class="token punctuation">(</span><span class="token string">'.form'</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span>
<span class="token comment">// 挂载过滤方法</span>
inputFilter<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 两秒后 取消过滤方法</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  inputFilter<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="autofillform"><a href="#autofillform" class="header-anchor">#</a> AutoFillForm</h2> <ul><li>描述：</li></ul> <p>自动测试表单，填充表单</p> <ul><li>实例化：</li></ul> <p><code>new utils.AutoFillForm(para)</code></p> <ul><li><p>实例化参数：</p> <ul><li><p><code>{object} para</code> - 初始化参数</p> <ul><li><p><code>{array} para.testConfig</code> - 测试配置</p></li> <li><p><code>{object} para.validator</code> - 测试库async-validator的实例</p></li> <li><p><code>{string} para.formSelector</code> - 表单选择器</p></li></ul></li></ul></li> <li><p>实例方法：</p> <ul><li><p><code>fill()</code> - 填充安全值</p></li> <li><p><code>test()</code> - 进行边缘测试</p> <p>返回值 <code>{boolean}</code> true - 边缘测试成功  false - 边缘测试失败</p></li></ul></li> <li><p>用法：</p> <ul><li><p><code>fill()</code>填充安全值不用传入<code>validator</code>参数</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-validate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-validate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-validate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>equipment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>equipment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      mac
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-validate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>equipment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>equipment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      pc
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-validate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>equipment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>equipment<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      mobile
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> testConfig <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 输入框</span>
    key<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
    safe<span class="token operator">:</span> <span class="token string">'asdfa'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    key<span class="token operator">:</span> <span class="token string">'age'</span><span class="token punctuation">,</span>
    safe<span class="token operator">:</span> <span class="token string">'24'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token comment">// 选择框</span>
    key<span class="token operator">:</span> <span class="token string">'equipment'</span><span class="token punctuation">,</span>
    safe<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'mac'</span><span class="token punctuation">,</span> <span class="token string">'pc'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">const</span> aff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">utils<span class="token punctuation">.</span>AutoFillForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  testConfig<span class="token operator">:</span> testConfig<span class="token punctuation">,</span>
  formSelector<span class="token operator">:</span> <span class="token string">'.form'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
aff<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><code>test()</code>必须传入<code>validator</code>参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> descriptor <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 必填</span>
      type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token comment">// 国际化</span>
      <span class="token function-variable function">message</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i18next<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>
      <span class="token comment">// transform (val) {</span>
      <span class="token comment">//   return val.trim()</span>
      <span class="token comment">// }</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// 正则</span>
      type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> pattern<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'^[a-zA-Z]+$'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">'Names can only be letters'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">'The name should be less than 32 bits'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">'The age cannot be empty'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  equipment<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">'The equipment cannot be empty'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> validator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span>

<span class="token keyword">const</span> testConfig <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// 输入框</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
    safe<span class="token operator">:</span> <span class="token string">'asdfa'</span><span class="token punctuation">,</span>
    test<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'required'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span> max<span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'space'</span><span class="token punctuation">,</span> space<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'adbc'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'asd ads'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'1231'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> <span class="token string">'age'</span><span class="token punctuation">,</span>
    safe<span class="token operator">:</span> <span class="token string">'24'</span><span class="token punctuation">,</span>
    test<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'required'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'space'</span><span class="token punctuation">,</span> space<span class="token operator">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'99'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'3 1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'1231'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 选择框</span>
  <span class="token punctuation">{</span>
    key<span class="token operator">:</span> <span class="token string">'equipment'</span><span class="token punctuation">,</span>
    safe<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'mac'</span><span class="token punctuation">,</span> <span class="token string">'pc'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    test<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'required'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> aff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">autoFillForm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  testConfig<span class="token operator">:</span> testConfig<span class="token punctuation">,</span>
  validator<span class="token operator">:</span> validator<span class="token punctuation">,</span>
  formSelector<span class="token operator">:</span> <span class="token string">'.form'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
aff<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'val'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>type</code> 可选值为 <code>required, text, max, space</code></p></li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/13/2020, 2:43:32 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/utils/doc/function.html">
        function
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/utils/assets/js/app.01d95d2e.js" defer></script><script src="/utils/assets/js/2.65d0540a.js" defer></script><script src="/utils/assets/js/7.d215e9a0.js" defer></script>
  </body>
</html>
